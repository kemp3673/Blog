{"version":3,"file":"static/js/82.a8e7a3f6.chunk.js","mappings":"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","sources":["pages/WriteBlog.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useLocation } from \"react-router-dom\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\n\nconst WriteBlog = () => {\n  // State\n  const [isEdit, setIsEdit] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [summary, setSummary] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [selectedFiles, setSelectedFile] = useState([]);\n  const [imagePreview, setImagePreview] = useState(null);\n\n  // Try and grab id from query string\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const blogId = queryParams.get(\"edit\");\n\n  console.log(\"selectedFiles: \", selectedFiles);\n\n  useEffect(() => {\n    const getFiles = async () => {\n      try {\n        if (blogId) {\n          setIsEdit(true);\n          const { data } = await axios.get(`/api/blogs/${blogId}`);\n          const { title, description, content, main_image } = data[0];\n          console.log(\"data: \", data[0]);\n          setTitle(title);\n          setSummary(description);\n          setText(content);\n          setSelectedFile(main_image);\n          setImagePreview(`/uploads/${main_image}`);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getFiles();\n  }, []);\n\n  const handleUpdate = async () => {\n    const formData = new FormData();\n    formData.append(\"title\", title);\n    formData.append(\"description\", summary);\n    formData.append(\"content\", text);\n    formData.append(\"main_image\", selectedFiles);\n    formData.append(\"user_id\", 1); // TODO change to user_id\n    try {\n      const { data } = await axios.patch(\n        `/api/auth/blogs/${blogId}`,\n        formData,\n        {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n          },\n        }\n      );\n      alert(\"Blog updated!\");\n      console.log(data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handlePost = async () => {\n    const formData = new FormData();\n    formData.append(\"title\", title);\n    formData.append(\"description\", summary);\n    formData.append(\"content\", text);\n    formData.append(\"main_image\", selectedFiles);\n    formData.append(\"user_id\", 1); // TODO change to user_id\n\n    try {\n      const { data } = await axios.post(\"/api/auth/blogs/write\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n      alert(\"Blog posted!\");\n      console.log(data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleImageUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      setSelectedFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        // Set the data URL as the preview image\n        setImagePreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  /*\n   * Quill modules to attach to editor\n   * See https://quilljs.com/docs/modules/ for complete options\n   */\n  const modules = {\n    toolbar: [\n      [{ header: \"1\" }, { header: \"2\" }, { font: [] }],\n      [{ size: [] }],\n      [\"bold\", \"italic\", \"underline\", \"strike\", \"blockquote\"],\n      [\n        { list: \"ordered\" },\n        { list: \"bullet\" },\n        { indent: \"-1\" },\n        { indent: \"+1\" },\n      ],\n      [\"link\", \"code-block\"],\n      [\"clean\"],\n    ],\n    clipboard: {\n      // toggle to add extra line breaks when pasting HTML:\n      matchVisual: false,\n    },\n  };\n  /*\n   * Quill editor formats\n   * See https://quilljs.com/docs/formats/\n   */\n  const formats = [\n    \"header\",\n    \"font\",\n    \"size\",\n    \"bold\",\n    \"italic\",\n    \"underline\",\n    \"strike\",\n    \"blockquote\",\n    \"list\",\n    \"bullet\",\n    \"indent\",\n    \"link\",\n    \"code-block\",\n  ];\n\n  return (\n    <div className=\"writeblog_container\">\n      <div className=\"writeblog_inner\">\n        <div className=\"writeblog_content\">\n          <div className=\"writeblog_Title_Sum\">\n            <label htmlFor=\"summary\">Title</label>\n            <input\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              maxLength=\"255\"\n            />\n          </div>\n          <div className=\"writeblog_Title_Sum\">\n            <label htmlFor=\"summary\">Summary</label>\n            <textarea\n              className=\"writeblog_summary\"\n              type=\"text\"\n              value={summary}\n              onChange={(e) => setSummary(e.target.value)}\n              maxLength=\"1000\"\n            />\n          </div>\n          <div className=\"editor_container\">\n            <ReactQuill\n              className=\"editor\"\n              theme=\"snow\"\n              value={text}\n              modules={modules}\n              formats={formats}\n              bounds={\".app\"}\n              onChange={(e) => setText(e)}\n            />\n          </div>\n        </div>\n        <div className=\"writeblog_menu\">\n          <div className=\"writeblog_menu_item\">\n            <h1>Publish</h1>\n            <span>\n              <b>Status: </b> Draft\n            </span>\n            <span>\n              <b>Visibility: </b> Public\n            </span>\n            <input\n              type=\"file\"\n              id=\"file\"\n              accept=\"image/*\"\n              style={{ display: \"none\" }}\n              onChange={handleImageUpload}\n            />\n            <label className=\"file_upload\" htmlFor=\"file\">\n              Upload Image\n            </label>\n            {/* TODO Update image to use stored image and not url */}\n            <div className=\"uploaded_images\">\n              {imagePreview ? (\n                <img\n                  style={{ maxHeight: \"100px\", maxWidth: \"100px\" }}\n                  src={imagePreview}\n                  alt=\"uploaded\"\n                />\n              ) : null}\n            </div>\n            <div className=\"write_buttons\">\n              {isEdit ? (\n                <>\n                  <button className=\"write_button\">Save as Draft</button>\n                  <button className=\"write_button\" onClick={handleUpdate}>\n                    Update\n                  </button>\n                </>\n              ) : (\n                <>\n                  <button className=\"write_button\">Save as Draft</button>\n                  <button className=\"write_button\" onClick={handlePost}>\n                    Post\n                  </button>\n                </>\n              )}\n            </div>\n          </div>\n          <div className=\"writeblog_menu_item\">\n            <h1>Categories</h1>\n            <div className=\"radio_group\">\n              <input type=\"radio\" name=\"category\" id=\"insight\" />\n              <label htmlFor=\"insight\">Insight</label>\n            </div>\n            <div className=\"radio_group\">\n              <input type=\"radio\" name=\"category\" id=\"tutorials\" />\n              <label htmlFor=\"tutorials\">Tutorial</label>\n            </div>\n            <div className=\"radio_group\">\n              <input type=\"radio\" name=\"category\" id=\"reviews\" />\n              <label htmlFor=\"reviews\">Review</label>\n            </div>\n            <div className=\"radio_group\">\n              <input type=\"radio\" name=\"category\" id=\"other\" />\n              <label htmlFor=\"other\">Other</label>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WriteBlog;\n"],"names":["_useState","useState","_useState2","_slicedToArray","isEdit","setIsEdit","_useState3","_useState4","title","setTitle","_useState5","_useState6","summary","setSummary","_useState7","_useState8","text","setText","_useState9","_useState10","selectedFiles","setSelectedFile","_useState11","_useState12","imagePreview","setImagePreview","location","useLocation","blogId","URLSearchParams","search","get","console","log","useEffect","getFiles","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","_data$","_title","description","content","main_image","wrap","_context","prev","next","axios","concat","sent","t0","stop","apply","arguments","handleUpdate","_ref2","_callee2","formData","_yield$axios$patch","_context2","FormData","append","headers","alert","handlePost","_ref3","_callee3","_yield$axios$post","_context3","_jsx","className","children","_jsxs","htmlFor","type","value","onChange","e","target","maxLength","ReactQuill","theme","modules","toolbar","header","font","size","list","indent","clipboard","matchVisual","formats","bounds","id","accept","style","display","event","file","files","reader","FileReader","onloadend","result","readAsDataURL","maxHeight","maxWidth","src","alt","_Fragment","onClick","name"],"sourceRoot":""}