"use strict";(self.webpackChunkbooking=self.webpackChunkbooking||[]).push([[82],{4082:function(e,t,n){n.r(t);var a=n(4165),s=n(5861),i=n(9439),r=n(2791),l=n(4569),c=n.n(l),o=n(7689),u=n(6770),d=n.n(u),p=(n(6009),n(8257)),h=n(184);t.default=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],l=t[1],u=(0,r.useState)(""),m=(0,i.Z)(u,2),b=m[0],x=m[1],g=(0,r.useState)(""),f=(0,i.Z)(g,2),j=f[0],v=f[1],w=(0,r.useState)(""),_=(0,i.Z)(w,2),k=_[0],N=_[1],y=(0,r.useState)([]),Z=(0,i.Z)(y,2),C=Z[0],S=Z[1],F=(0,r.useState)(null),P=(0,i.Z)(F,2),T=P[0],U=P[1],D=(0,r.useState)(!1),L=(0,i.Z)(D,2),R=L[0],V=L[1],q=(0,o.TH)(),z=new URLSearchParams(q.search).get("edit");(0,r.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,s,i,r,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!z){e.next=14;break}return l(!0),e.next=5,c().get("/api/blogs/".concat(z));case 5:t=e.sent,n=t.data,s=n[0],i=s.title,r=s.description,o=s.content,u=s.main_image,console.log("data: ",n[0]),x(i),v(r),N(o),S(u),U("/uploads/".concat(u));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var H=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),(t=new FormData).append("title",b),t.append("description",j),t.append("content",k),t.append("main_image",C),t.append("user_id",1),e.prev=7,e.next=10,c().patch("/api/auth/blogs/".concat(z),t,{headers:{"Content-Type":"multipart/form-data"}});case 10:window.location.href="/blog",e.next=17;break;case 13:e.prev=13,e.t0=e.catch(7),console.log(e.t0),V(!1);case 17:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),(t=new FormData).append("title",b),t.append("description",j),t.append("content",k),t.append("main_image",C),t.append("user_id",1),e.prev=7,e.next=10,c().post("/api/auth/blogs/write",t,{headers:{"Content-Type":"multipart/form-data"}});case 10:window.location.href="/blog",e.next=17;break;case 13:e.prev=13,e.t0=e.catch(7),console.log(e.t0),V(!1);case 17:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){window.location.href=z?"/blog/".concat(z):"/blog"};return(0,h.jsxs)("div",{className:"writeblog_container",children:[R&&(0,h.jsx)(p.Z,{}),(0,h.jsxs)("div",{className:"writeblog_inner",children:[(0,h.jsxs)("div",{className:"writeblog_content",children:[(0,h.jsxs)("div",{className:"writeblog_Title_Sum",children:[(0,h.jsx)("label",{htmlFor:"summary",children:"Title"}),(0,h.jsx)("input",{type:"text",value:b,onChange:function(e){return x(e.target.value)},maxLength:"255"})]}),(0,h.jsxs)("div",{className:"writeblog_Title_Sum",children:[(0,h.jsx)("label",{htmlFor:"summary",children:"Summary"}),(0,h.jsx)("textarea",{className:"writeblog_summary",type:"text",value:j,onChange:function(e){return v(e.target.value)},maxLength:"1000"})]}),(0,h.jsx)("div",{className:"editor_container",children:(0,h.jsx)(d(),{className:"editor",theme:"snow",value:k,modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","code-block"],["clean"]],clipboard:{matchVisual:!1}},formats:["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","code-block"],bounds:".app",onChange:function(e){return N(e)}})})]}),(0,h.jsx)("div",{className:"writeblog_menu",children:(0,h.jsxs)("div",{className:"writeblog_menu_item",children:[(0,h.jsx)("h1",{children:"Publish"}),n?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{children:[(0,h.jsx)("b",{children:"Status: "})," Posted"]}),(0,h.jsxs)("span",{children:[(0,h.jsx)("b",{children:"Visibility: "})," Public"]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{children:[(0,h.jsx)("b",{children:"Status: "})," Draft"]}),(0,h.jsxs)("span",{children:[(0,h.jsx)("b",{children:"Visibility: "})," Private"]})]}),(0,h.jsx)("input",{type:"file",id:"file",accept:"image/*",style:{display:"none"},onChange:function(e){var t=e.target.files[0];if(t){S(t);var n=new FileReader;n.onloadend=function(){U(n.result)},n.readAsDataURL(t)}}}),(0,h.jsx)("label",{className:"file_upload",htmlFor:"file",children:"Upload Image"}),(0,h.jsx)("div",{className:"uploaded_images",children:T?(0,h.jsx)("img",{style:{maxHeight:"100px",maxWidth:"100px"},src:T,alt:"uploaded"}):null}),(0,h.jsx)("div",{className:"write_buttons",children:n?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{className:"write_button",onClick:E,children:"Cancel"}),R?(0,h.jsx)("button",{className:"write_button",children:"Updating..."}):(0,h.jsx)("button",{className:"write_button",onClick:H,children:"Update"})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{className:"write_button",onClick:E,children:"Cancel"}),R?(0,h.jsx)("button",{className:"write_button",children:"Posting..."}):(0,h.jsx)("button",{className:"write_button",onClick:A,children:"Post"})]})})]})})]})]})}}}]);
//# sourceMappingURL=82.ed00f9b9.chunk.js.map