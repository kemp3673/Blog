{"version":3,"file":"static/js/82.79aba4fd.chunk.js","mappings":"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","sources":["pages/WriteBlog.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useLocation } from \"react-router-dom\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\n\nconst WriteBlog = () => {\n  // State\n  const [isEdit, setIsEdit] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [summary, setSummary] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [selectedFiles, setSelectedFile] = useState([]);\n  const [imagePreview, setImagePreview] = useState(null);\n\n  // Try and grab id from query string\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const blogId = queryParams.get(\"edit\");\n\n  useEffect(() => {\n    const getFiles = async () => {\n      try {\n        if (blogId) {\n          setIsEdit(true);\n          const { data } = await axios.get(`/api/blogs/${blogId}`);\n          const { title, description, content, main_image } = data[0];\n          console.log(\"data: \", data[0]);\n          setTitle(title);\n          setSummary(description);\n          setText(content);\n          setSelectedFile(main_image);\n          setImagePreview(`/uploads/${main_image}`);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getFiles();\n  }, []);\n\n  const handleUpdate = async () => {\n    const formData = new FormData();\n    formData.append(\"title\", title);\n    formData.append(\"description\", summary);\n    formData.append(\"content\", text);\n    formData.append(\"main_image\", selectedFiles);\n    formData.append(\"user_id\", 1); // TODO change to user_id\n    try {\n      await axios.patch(`/api/auth/blogs/${blogId}`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n      // Redirect to blog page\n      window.location.href = `/blog`;\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handlePost = async () => {\n    const formData = new FormData();\n    formData.append(\"title\", title);\n    formData.append(\"description\", summary);\n    formData.append(\"content\", text);\n    formData.append(\"main_image\", selectedFiles);\n    formData.append(\"user_id\", 1); // TODO change to user_id\n\n    try {\n      await axios.post(\"/api/auth/blogs/write\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n      // Redirect to blog page\n      window.location.href = `/blog`;\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleImageUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      setSelectedFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        // Set the data URL as the preview image\n        setImagePreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleCancel = () => {\n    window.location.href = \"/blog\";\n  };\n\n  /*\n   * Quill modules to attach to editor\n   * See https://quilljs.com/docs/modules/ for complete options\n   */\n  const modules = {\n    toolbar: [\n      [{ header: \"1\" }, { header: \"2\" }, { font: [] }],\n      [{ size: [] }],\n      [\"bold\", \"italic\", \"underline\", \"strike\", \"blockquote\"],\n      [\n        { list: \"ordered\" },\n        { list: \"bullet\" },\n        { indent: \"-1\" },\n        { indent: \"+1\" },\n      ],\n      [\"link\", \"code-block\"],\n      [\"clean\"],\n    ],\n    clipboard: {\n      // toggle to add extra line breaks when pasting HTML:\n      matchVisual: false,\n    },\n  };\n  /*\n   * Quill editor formats\n   * See https://quilljs.com/docs/formats/\n   */\n  const formats = [\n    \"header\",\n    \"font\",\n    \"size\",\n    \"bold\",\n    \"italic\",\n    \"underline\",\n    \"strike\",\n    \"blockquote\",\n    \"list\",\n    \"bullet\",\n    \"indent\",\n    \"link\",\n    \"code-block\",\n  ];\n\n  return (\n    <div className=\"writeblog_container\">\n      <div className=\"writeblog_inner\">\n        <div className=\"writeblog_content\">\n          <div className=\"writeblog_Title_Sum\">\n            <label htmlFor=\"summary\">Title</label>\n            <input\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              maxLength=\"255\"\n            />\n          </div>\n          <div className=\"writeblog_Title_Sum\">\n            <label htmlFor=\"summary\">Summary</label>\n            <textarea\n              className=\"writeblog_summary\"\n              type=\"text\"\n              value={summary}\n              onChange={(e) => setSummary(e.target.value)}\n              maxLength=\"1000\"\n            />\n          </div>\n          <div className=\"editor_container\">\n            <ReactQuill\n              className=\"editor\"\n              theme=\"snow\"\n              value={text}\n              modules={modules}\n              formats={formats}\n              bounds={\".app\"}\n              onChange={(e) => setText(e)}\n            />\n          </div>\n        </div>\n        <div className=\"writeblog_menu\">\n          <div className=\"writeblog_menu_item\">\n            <h1>Publish</h1>\n            {isEdit ? (\n              <>\n                <span>\n                  <b>Status: </b> Posted\n                </span>\n                <span>\n                  <b>Visibility: </b> Public\n                </span>\n              </>\n            ) : (\n              <>\n                <span>\n                  <b>Status: </b> Draft\n                </span>\n                <span>\n                  <b>Visibility: </b> Private\n                </span>\n              </>\n            )}\n            <input\n              type=\"file\"\n              id=\"file\"\n              accept=\"image/*\"\n              style={{ display: \"none\" }}\n              onChange={handleImageUpload}\n            />\n            <label className=\"file_upload\" htmlFor=\"file\">\n              Upload Image\n            </label>\n            {/* TODO Update image to use stored image and not url */}\n            <div className=\"uploaded_images\">\n              {imagePreview ? (\n                <img\n                  style={{ maxHeight: \"100px\", maxWidth: \"100px\" }}\n                  src={imagePreview}\n                  alt=\"uploaded\"\n                />\n              ) : null}\n            </div>\n            <div className=\"write_buttons\">\n              {isEdit ? (\n                <>\n                  <button className=\"write_button\" onClick={handleCancel}>\n                    Cancel\n                  </button>\n                  <button className=\"write_button\" onClick={handleUpdate}>\n                    Update\n                  </button>\n                </>\n              ) : (\n                <>\n                  <button className=\"write_button\" onClick={handleCancel}>\n                    Cancel\n                  </button>\n                  <button className=\"write_button\" onClick={handlePost}>\n                    Post\n                  </button>\n                </>\n              )}\n            </div>\n          </div>\n          {/* <div className=\"writeblog_menu_item\">\n            <h1>Categories</h1>\n            <div className=\"radio_group\">\n              <input type=\"radio\" name=\"category\" id=\"insight\" />\n              <label htmlFor=\"insight\">Insight</label>\n            </div>\n            <div className=\"radio_group\">\n              <input type=\"radio\" name=\"category\" id=\"tutorials\" />\n              <label htmlFor=\"tutorials\">Tutorial</label>\n            </div>\n            <div className=\"radio_group\">\n              <input type=\"radio\" name=\"category\" id=\"reviews\" />\n              <label htmlFor=\"reviews\">Review</label>\n            </div>\n            <div className=\"radio_group\">\n              <input type=\"radio\" name=\"category\" id=\"other\" />\n              <label htmlFor=\"other\">Other</label>\n            </div>\n          </div> */}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WriteBlog;\n"],"names":["_useState","useState","_useState2","_slicedToArray","isEdit","setIsEdit","_useState3","_useState4","title","setTitle","_useState5","_useState6","summary","setSummary","_useState7","_useState8","text","setText","_useState9","_useState10","selectedFiles","setSelectedFile","_useState11","_useState12","imagePreview","setImagePreview","location","useLocation","blogId","URLSearchParams","search","get","useEffect","getFiles","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","_data$","_title","description","content","main_image","wrap","_context","prev","next","axios","concat","sent","console","log","t0","stop","apply","arguments","handleUpdate","_ref2","_callee2","formData","_context2","FormData","append","headers","window","href","handlePost","_ref3","_callee3","_context3","handleCancel","_jsx","className","children","_jsxs","htmlFor","type","value","onChange","e","target","maxLength","ReactQuill","theme","modules","toolbar","header","font","size","list","indent","clipboard","matchVisual","formats","bounds","_Fragment","id","accept","style","display","event","file","files","reader","FileReader","onloadend","result","readAsDataURL","maxHeight","maxWidth","src","alt","onClick"],"sourceRoot":""}